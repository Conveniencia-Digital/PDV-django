{% block style %}
<style>
/* =========================
   LAYOUT GERAL
========================= */
#bloco-dados {
    background: #f8f9fb;
    border-radius: 18px;
    padding: 24px;
}

/* =========================
   CARDS / RELATÓRIO
========================= */
#cards-relatorio {
    margin-bottom: 20px;
}

/* =========================
   BLOCO FILTROS
========================= */
#bloco-completo {
    background: #ffffff;
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.05);
}

/* =========================
   BOTÃO NOVA VENDA
========================= */
.btn-nova-venda {
    font-weight: 600;
    font-size: 0.95rem;
    border-radius: 12px;
    padding: 12px;
    transition: all 0.25s ease;
}
.btn-nova-venda:hover {
    transform: translateY(-2px);
}

/* =========================
   INPUTS DATA
========================= */
input[type="date"] {
    border-radius: 12px;
    font-size: 0.85rem;
}
input[type="date"]:focus {
    box-shadow: 0 0 0 3px rgba(13,110,253,0.15);
}

/* =========================
   BOTÕES PERÍODO
========================= */
.btn-group button {
    border-radius: 999px !important;
    padding: 6px 14px;
    font-size: 0.75rem;
    transition: all 0.2s ease;
}

.btn-periodo-ativo {
    background: linear-gradient(135deg, #0d6efd, #4f8cff);
    color: #fff !important;
    border: none;
}

.btn-group button:hover {
    transform: translateY(-1px);
}

/* =========================
   BOTÃO LIMPAR
========================= */
.btn-danger {
    border-radius: 999px;
    font-size: 0.75rem;
}

/* =========================
   TABELA
========================= */
#tabela-vendas {
    background: #ffffff;
    border-radius: 18px;
    padding: 10px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.04);
}

/* =========================
   RESPONSIVO
========================= */
@media (max-width: 768px) {
    #bloco-dados {
        padding: 16px;
    }
    .btn-group {
        justify-content: center;
    }
}

</style>

{% endblock style %}


<div id="bloco-dados">
        <div id="cards-relatorio">
                {% include 'vendas/partials/cards.html' %}
        </div>
  <div id="bloco-completo">            
        <div class="row align-items-center mt-4">

            <!-- Botão de nova venda -->
            <div class="col-md-3 mb-3">
                <button 
                    class="btn btn-primary w-100 shadow-sm btn-nova-venda" 
                    data-bs-toggle="modal" 
                    data-bs-target="#staticBackdrop"
                    hx-get="{% url 'cadastrar-vendas' %}"
                    hx-target="#addConteudo" 
                    hx-swap="innerHTML"
                >
                    + Nova Venda
                </button>
            </div>

            <!-- Filtros -->
            <div class="col-md-9">
                <form method="get"
                    hx-get="{% url 'vendas' %}"
                    hx-target="#bloco-dados"
                    hx-swap="outerHTML"
                    hx-indicator=".htmx-indicator"
                    hx-trigger="submit">
                    
                   
                    <!-- Filtro por datas -->
                    <div class="row g-2 mb-3">
                        <div class="col-sm-4">
                            <input type="date"
                                    name="inicio"
                                    aria-label="Data inicial"
                                    value="{{ inicio }}"
                                    class="form-control shadow-sm {% if inicio %}border-primary border-2{% endif %}">

                        </div>
                        <div class="col-sm-4">
                            <input type="date"
                                    name="fim"
                                    aria-label="Data final"
                                    value="{{ fim }}"
                                    class="form-control shadow-sm {% if fim %}border-primary border-2{% endif %}">

                        </div>
                        <div class="col-sm-4 d-grid">
                            <button class="btn btn-primary w-100 shadow-sm btn-nova-venda">Filtrar</button>
                        </div>
                    </div>
                    
                    <!-- Botões rápidos -->
                    <div class="btn-group flex-wrap w-100 gap-2" role="group">

                        <button
                            name="periodo"
                            value="hoje"
                            class="btn btn-outline-secondary shadow-sm
                                {% if periodo == 'hoje' %}btn-periodo-ativo{% endif %}">
                            Hoje
                        </button>

                        <button
                            name="periodo"
                            value="ontem"
                            class="btn btn-outline-secondary shadow-sm
                                {% if periodo == 'ontem' %}btn-periodo-ativo{% endif %}">
                            Ontem
                        </button>
                        
                        <button
                            name="periodo"
                            value="7dias"
                            class="btn btn-outline-secondary shadow-sm
                                {% if periodo == '7dias' %}btn-periodo-ativo{% endif %}">
                            7 dias
                        </button>

                        <button
                            name="periodo"
                            value="este_mes"
                            class="btn btn-outline-secondary shadow-sm
                                {% if periodo == 'este_mes' %}btn-periodo-ativo{% endif %}">
                            Este mês
                        </button>

                        <button
                            name="periodo"
                            value="mes_passado"
                            class="btn btn-outline-secondary shadow-sm
                                {% if periodo == 'mes_passado' %}btn-periodo-ativo{% endif %}">
                            Mês passado
                        </button>

                        <button
                            name="periodo"
                            value="este_ano"
                            class="btn btn-outline-secondary shadow-sm
                                {% if periodo == 'este_ano' %}btn-periodo-ativo{% endif %}">
                            Este ano
                        </button>

                        <button
                            name="periodo"
                            value="todas"
                            class="btn btn-outline-secondary shadow-sm
                                {% if periodo == 'todas' %}btn-periodo-ativo{% endif %}">
                            Todas
                        </button>


                        <!-- Botão LIMPAR automático -->
                        <button
                            type="button"
                            class="btn btn-danger shadow-sm"
                            hx-get="{% url 'vendas' %}"
                            hx-target="#bloco-dados"
                            hx-swap="innerHTML"
                            onclick="document.getElementById('filtrosForm').reset();"
                        >
                            Limpar
                        </button>

                    </div>
                </form>
            </div>

        </div>
 </div>   
 <div id="tabela-vendas" class="table-responsive mt-4">
        {% include 'vendas/partials/tabela.html' %}
</div> 

{% include 'vendas/modal/modal-venda.html' %}
{% include 'vendas/modal/modal-alerta.html' %}